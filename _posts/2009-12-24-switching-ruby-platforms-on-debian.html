---
layout: post
title: Switching Ruby platforms on Debian
date: '2009-12-24T12:14:00.006-05:00'
author: Richard Hurt
tags:
- ruby
- debian
- ruby on rails
modified_time: '2010-01-26T13:46:29.197-05:00'
blogger_id: tag:blogger.com,1999:blog-5693054744995313095.post-5337255237399856006
blogger_orig_url: http://kangaroobox.blogspot.com/2009/12/switching-ruby-platforms-on-debian.html
permalink: 2009/12/switching-ruby-platforms-on-debian.html
---

<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://www.debian.org/logos/openlogo-nd-50.png"><img style="float: right; margin: 0pt 0pt 10px 10px; cursor: pointer; width: 50px; height: 61px;" src="http://www.debian.org/logos/openlogo-nd-50.png" alt="" border="0" /></a><br />My favorite Linux server distribution is <a href="http://www.debian.org/">Debian</a> and I use it whenever possible.  Its sane layout and APT system make working with it easy and fun.  I've also been doing quite a bit of <a href="http://rubyonrails.org/">Ruby on Rails</a> coding recently and I have grown to love the way it works and how easy it is to get massive amounts of work done.  The problems start when you try to use Ruby on Debian.  Sure, Debian tries to make things super easy to install and upgrade by using the APT package manager.  However, the Ruby community insist on using Gem as its package manager and the two don't work and play well together.<br /><br />I recently wanted to try out the latest Ruby and found that while you can install both Ruby 1.8 and Ruby 1.9.1 they don't use the Alternatives system built-in to Debian.  This means that the Ruby 1.8 executable is "hard-coded" into the system and even installing Ruby 1.9.1 doesn't change the default version that runs.<br /><br />One solution is to go through the system looking for links to the 1.8 stuff and change it to point to 1.9.1.  To do this manually is tedious, error prone, and not reproducible; wouldn't it be great if there was a way to make all these links automatically?  Enter the Debian alternatives system.  Thanks to a <a href="http://groups.google.com/group/rails-oceania/msg/dc0f32bec9f49025">post by David Lee</a> I had a starting point to get my system working the way I wanted it to.  His post was for Ubuntu and specifically targeted Ruby 1.9 so I've updated it a bit and laid out the steps below for your convenience.<br /><br /><ol><li>Install the latest versions for Ruby1.8 and Ruby1.9.1<br /><pre name="code" class="brush:ruby">sudo aptitude install -s ruby1.8  riby1.9.1 irb1.8 irb1.9.1 ri1.8 ri1.9.1<br /></pre><br /></li> <li>Next we're going to configure the Alternatives system.  Create a new file on your system and copy this code into it.<br /><pre name="code" class="brush:ruby"># Filename: ruby-alternatives.sh<br /># install ruby1.8 &amp; friends with priority 500 and make them the default<br />update-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.8 500 \<br />--slave   /usr/share/man/man1/ruby.1.gz ruby.1.gz \<br />/usr/share/man/man1/ruby.1.8.gz \<br />--slave   /usr/bin/ri ri /usr/bin/ri1.8 \<br />--slave   /usr/bin/irb irb /usr/bin/irb1.8<br /><br /># install ruby1.9.1 &amp; friends with priority 400<br />update-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.9.1 400 \<br />--slave   /usr/share/man/man1/ruby.1.gz ruby.1.gz \<br />/usr/share/man/man1/ruby.1.9.1.1.gz \<br />--slave   /usr/bin/ri ri /usr/bin/ri1.9.1 \<br />--slave   /usr/bin/irb irb /usr/bin/irb1.9.1<br /></pre><br /></li> <li>Now execute the script you just created to install your new configuration. You should see some messages go by but don't worry if it complains a little bit about the old 1.8 stuff not being there.<br /><pre name="code" class="brush:ruby">sh ruby-alternatives.sh<br /></pre><br /></li> <li>You are now ready to alternate between Ruby installations on your Debian box.  Just run the command below whenever you want to switch between 1.8 and 1.9.1.<br /><pre name="code" class="brush:ruby">update-alternatives --config ruby<br /></pre></li></ol><span style="font-weight: bold;font-family:lucida grande;" >NOTE: </span><span style="font-weight: bold; font-style: italic;font-family:lucida grande;" >These commands worked on my Debian Squeeze install. Your mileage may vary.</span>
