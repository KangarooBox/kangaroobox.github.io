---
layout: post
title: Rack Applications under AWS OpsWorks
date: '2013-03-22T07:40:00.000-04:00'
author: Richard Hurt
comments: true
tags: Ruby Rack Ruby_on_Rails Sinatra OpsWorks AWS
modified_time: '2013-03-28T10:10:06.290-04:00'
blogger_id: tag:blogger.com,1999:blog-5693054744995313095.post-4680599087514919172
blogger_orig_url: http://kangaroobox.blogspot.com/2013/03/rack-applications-under-aws-opsworks.html
---

<h2><a href="http://www.crunchdot.com/wp-content/uploads/2013/02/d89a43574fcopie.jpeg-800x295.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="118" src="http://www.crunchdot.com/wp-content/uploads/2013/02/d89a43574fcopie.jpeg-800x295.jpg" width="320" /></a>AWS OpsWorks</h2><div>First a bit about <a href="http://aws.amazon.com/opsworks/">AWS OpsWorks</a>, it's Amazon's answer to operating your own datacenter. &nbsp;With OpsWorks you can do things like easily autoscale your systems by time or load, deploy your applications from <a href="https://github.com/">Github</a> (or <a href="http://aws.amazon.com/s3/">S3</a>), monitor your stack with <a href="http://ganglia.sourceforge.net/">Ganglia</a>, and a whole raft of other things.</div><h2>Stacks</h2><div>The OpsWorks&nbsp;architecture&nbsp;is designed in what they call "stacks". &nbsp;These stacks are just groups of components that work together to do whatever task you want them to do (i.e. provide a web service of some kind). &nbsp;The stack is broken up into layers with each layer having a unique job within the stack (load balancer, app server, DB server, etc.) &nbsp;</div><h2>Rails (Rack) Layer</h2><div>The layer I'm concerned with in this post is the application server layer. &nbsp;There are several different types of apps that are supported out of the box; PHP, Rails, Node, and static HTML. &nbsp;I wanted to run a <a href="http://www.sinatrarb.com/">Ruby Sinatra</a> application, which is close to a Rails app, but not quite. &nbsp;It turns out that the "Rails" layer is actually a "Rack" application and natively supports anything that runs under <a href="http://rack.github.com/">Rack</a>, such as Sinatra. &nbsp;:)</div><div><br /></div><div>All you have to do to get your Rack application running in OpsWare is create these three files in your project and deploy your application just like normal. &nbsp;:)</div><br /><pre class="brush:ruby">#Gemfile<br />=============================<br />source 'https://rubygems.org'<br /><br />gem 'sinatra'<br />gem 'unicorn'<br /><br />=============================<br /></pre><br /><pre class="brush:ruby">#app.rb<br />=============================<br />require 'rubygems'<br />require 'sinatra'<br /><br />get '/' do<br />"hello world!"<br />end<br />=============================<br /></pre><br /><pre class="brush:ruby"># config.ru<br />=============================<br />require 'sinatra'<br /> <br />set     :env, :production<br />disable :run<br /> <br />require './app.rb'<br /> <br />run Sinatra::Application<br />=============================<br /></pre>
